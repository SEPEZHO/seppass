import os

# –æ—á–µ–Ω—å –Ω–∞–ø—Ä—è–∂–Ω—ã–π –∫–æ–¥, –ø–æ —ç—Ç–æ–º—É —è –µ–≥–æ –ø–æ–¥–ø–∏—à—É

def ls_main(message, bot):
	# –ø–∞–ø–∫–∞ —é–∑–µ—Ä–∞
	root_folder = 'Users_folder/user_'+str(message.from_user.id)
	response_arr = []
	# –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º –≤—Å–µ –ø–∞–ø–∫–∏ –≤ root
	for root, dirs, files in os.walk(root_folder):
		for dir_ in dirs:
			# –∑–∞–Ω–æ—Å–∏–º –ø—É—Ç—å –∫–∞–∂–¥–æ–π –ø–∞–ø–∫–∏ –≤ –º–∞—Å—Å–∏–≤, –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–º–∏
			response_arr.append(root+ '/' +dir_)
			# –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –¥–∞–Ω–Ω–æ–π –ø–∞–ø–∫–µ, –∏ –∑–∞–Ω–æ—Å–∏–º –≤ —Ç–æ—Ç –∂–µ –º–∞—Å—Å–∏–≤
			for file in sorted(os.listdir(root+ '/' +dir_)):
				if file.endswith(".gpg"):
					response_arr.append(root+ '/' +dir_ + '/' +file)
	# —Å–æ—Ä—Ç–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ 
	response_arr = sorted(response_arr)
	# –ø–µ—Ä–µ–±–æ—Ä –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞/–ø–∞–ø–∫–∏ –≤ –º–∞—Å—Å–∏–≤–µ
	for file in response_arr:
		# –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É/–ø–∞–ø–∫–µ –ø–∞—Ä—Å–∏–º –ø–æ –∑–Ω–∞–∫—É "/" —É–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç(—ç—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞) –∏ —Å–æ–µ–¥–µ–Ω—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ, —Ç–∞–∫ –º—ã –ø–æ–ª—É—á–∞–µ–º –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É/–ø–∞–ø–∫–µ.
		# –ø–æ—Å–ª–µ –º—ã –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º –≤—Å–µ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã/–ø–∞–ø–∫–∏ –≤ –ø–∞–ø–∫–µ —Å —Ñ–∞–π–ª–æ–º, –∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ —Å–æ—Ä—Ç–∏—Ä—É–µ–º	
		ls = sorted(os.listdir('/'.join(file.split('/')[:-1])))
		# –º—ã –Ω–∞—Ö–æ–¥–∏–º –Ω–æ–º–µ—Ä –≤ –º–∞—Å—Å–∏–≤–µ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞/–ø–∞–ø–∫–∏
		index = ls.index(''.join(file.split('/')[-1]))
		# –∑–∞–º–µ–Ω—è–µ–º –ø—É–Ω–∫—Ç –≤ –≥–ª–∞–≤–Ω–æ–º –º–∞—Å—Å–∏–≤–µ –Ω–∞ –∫–æ–Ω–µ—á–Ω—É—é —Å—Ç—Ä–æ—á–∫—É
		# –¥–ª—è —ç—Ç–æ–≥–æ –±–µ—Ä–µ–º –∏–Ω–¥–µ–∫—Å –∑–∞–ø–∏—Å–∏ –≤ –º–∞—Å—Å–∏–≤–µ
		index_file = response_arr.index(file)
		# –≤–≤–æ–¥–∏–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∏–º–≤–æ–ª–∞ –≤ —Å—Ç—Ä–æ–∫–µ, –≥–¥–µ –µ—Å–ª–∏ —Ñ–∞–π–ª/–ø–∞–ø–∫–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è, —Ç–æ –æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è '‚îî‚îÄ‚îÄ '
		last_symbol = '‚ï†‚ïê‚ïê '
		# –µ—Å–ª–∏ –¥–∞–Ω–Ω–∞—ã–π —Ñ–∞–π–ª/–ø–∞–ø–∫–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤ –º–∞—Å—Å–∏–≤–µ, —Ç–æ –º—ã –ø–µ—Ä–µ—Ö–æ–¥–∏–º
		if len(ls) == index + 1:
			# —Å—é–¥–∞
			last_symbol = '‚ïö‚ïê‚ïê '
		# –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞/–ø–∞–ø–∫–∏ –ø–æ–ª—É—á–∞–µ–º —Ä–∞—Å–ø–∞—Ä—Å–∏–≤ –∑–∞–ø–∏—Å—å –≤ –º–∞—Å—Å–∏–≤ –ø–æ –∑–Ω–∞–∫—É "/" , –∏ –≤—ã—Ç–∞—â–∏–≤ –∏–∑ –Ω–µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–ø–∏—Å—å 
		file_name = ''.join(file.split('/')[-1])
		# –∞ –ø–æ—Ç–æ–º –∑–∞–º–µ–Ω—è–º –ø—É–Ω–∫—Ç –≤ –≥–ª–∞–≤–Ω–æ–º –º–∞—Å—Å–∏–≤–µ –Ω–∞ –∑–∞–ø–∏—Å—å, –≤ –∫–æ—Ç–æ—Ä–æ–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Å—Ç—É–ø–æ–≤ –∏ –ø–∞–ª–æ—á–µ–∫ '‚îÇ¬†¬† ' —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (—Å–º –Ω–∏–∂–µ).
		# –¥–æ–±–∞–≤–ª—è–µ–º –∫ —ç—Ç–æ–π –∑–∞–ø–∏—Å–µ –∑–Ω–∞–∫ '‚îî‚îÄ‚îÄ ' (–∏–ª–∏ '‚îú‚îÄ‚îÄ ') –∏ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞/–ø–∞–ø–∫–∏
		# –¥–æ–±–∞–≤–ª—è–µ–º –µ–º–æ–¥–∂–∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ñ–∞–π–ª —ç—Ç–æ –∏–ª–∏ –Ω–µ—Ç
		if file_name.endswith(".gpg"):
			response_arr[index_file] =  line(file, root_folder)+last_symbol+file_name[:-4]
		else:
			response_arr[index_file] =  line(file, root_folder)+last_symbol+'üìÇ'+file_name

	# –ø–æ—Å–ª–µ –º—ã —Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—É—é –∑–∞–ø–∏—Å—å, –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ–º
	response_text = '‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£\n\n'+'		üìÇuser_'+str(message.from_user.id) + '\n		‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n'
	# –ø–∞—Ä—Å–∏–º –º–∞—Å—Å–∏–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º –≤—Å–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ
	for response_arr_text in response_arr:
		response_text +='		'+response_arr_text+'\n'
	response_text +='\n‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£'
	# –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é	
	bot.send_message(message.chat.id, response_text)

# —Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è, –æ –∫–æ—Ç–æ—Ä–æ–π —è —É–ø–æ–º—è–Ω—É–ª –≤—ã—à–µ.
# –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç "–≥–ª—É–±–∏–Ω—É" –∑–∞–ø–∏—Å–∏, –∏ –ø—Ä–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–∞–ª–æ—á–∫–∏ –∏–ª–∏ –æ—Ç—Å—Ç—É–ø—ã
# –ø—Ä–∏–Ω–µ–º–∞–µ—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –∏ –ø—É—Ç—å –∫ root –¥–µ—Ä–∏–∫—Ç–æ—Ä–∏–∏ –ø–æ–ª–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
def line(way, root_folder):
	# –ø–∞—Ä—Å–∏—Ç –ø—É—Ç—å –∫ –∑–∞–ø–∏—Å–∏ –ø–æ –∑–Ω–∞–∫—É "/"
	way = way.split('/')
	# –æ—Ç—Ä–µ–∑–∞–µ—Ç –ø–µ—Ä–≤—ã–µ 2 –ø—É–Ω–∫—Ç–∞ (–∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å —Ä–∞–≤–Ω—ã root_folder)
	# –∑–∞—Ç–µ–º –æ—Ç—Ä–µ–∑–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—É–Ω–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–≤–µ–Ω –Ω–∞–∑–≤–∞–Ω–∏—é —Å–∞–º–æ–π –∑–∞–ø–∏—Å–∏/–ø–∞–ø–∫–µ
	# –ø–æ—Ç–æ–º —Ä–µ–≤–µ—Ä—Å–∏–º –º–∞—Å—Å–∏–≤, –¥–ª—è —É–¥–æ–±–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
	way = way[2:][:-1][::-1]
	# –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫—É–¥–∞ –∑–∞–Ω–µ—Å—É—Ç—Å—è –≤—Å–µ –ª–∏–Ω–∏–∏ –∏ –æ—Ç—Å—Ç—É–ø—ã
	line = ''
	# –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –¥–ª—è —Å—á–µ—Ç–∞ "–≥–ª—É–±–∏–Ω—ã"
	i=0
	# –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π "–∫—É—Å–æ—á–µ–∫" –æ—Ç –ø—É—Ç–∏ –¥–æ —Ñ–∞–π–ª–∞ 
	for folder in way:
		i = i+1
		# —Å–Ω–æ–≤–∞ —Ä–µ–≤–µ—Ä—Å–∏–º way –∏ —Å—Ä–µ–∑–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–ø–∏—Å—å –∏–∑ –ø–∞—Å—Å–∏–≤–∞, —Ç–∞–∫ –º—ã –ø–æ–¥–Ω–∏–º–∞–µ–º—Å—è –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ
		# –ø–æ—Å–ª–µ —Å–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –≤ —Å—Ç—Ä–æ–∫—É, –∏ –ø–æ–ª—É—á–∞–µ–º –ø—É—Ç—å –¥–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –ø–∞–ø–∫–∏, –Ω–∞ —Ä–∞–∑–Ω–æ–π –≤—ã—Å–æ—Ç–µ(–∑–∞–≤–∏—Å–∏—Ç –æ—Ç i)
		depth_path = root_folder+'/'+'/'.join(way[::-1][:-i])
		# –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º –¥–µ—Ä—Ä–∏–∫—Ç–æ—Ä–∏—é —Ä–æ–¥–∏—Ç–µ–ª—è, –∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ —Å–æ—Ä—Ç–∏—Ä—É–µ–º
		listdir = sorted(os.listdir(depth_path))
		# –Ω–∞—Ö–æ–¥–∏–º –Ω–æ–º–µ—Ä –ø–∞–ø–∫–∏ –≤ –º–∞—Å—Å–∏–≤–µ
		num = listdir.index(folder)
		if len(listdir) == num+1:
			# –µ—Å–ª–∏ —ç—Ç–∞ –ø–∞–ø–∫–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è, —Ç–æ –∑–∞–Ω–æ—Å–∏–º –ø—É—Å—Ç–æ–π –æ—Ç—Å—Ç—É–ø
			line = '       '+line
		else:
			# –µ—Å–ª–∏ —ç—Ç–∞ –ø–∞–ø–∫–∞ –Ω–µ –ø–æ—Å–ª–µ–¥–Ω—è—è, —Ç–æ –∑–∞–Ω–æ—Å–∏–º —á–µ—Ä—Ç—É
			line = '‚ïë¬†¬†    '+line
	return line
